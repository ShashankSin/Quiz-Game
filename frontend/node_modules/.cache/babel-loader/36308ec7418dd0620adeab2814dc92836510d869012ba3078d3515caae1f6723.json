{"ast":null,"code":"\"use client\";import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{useAuth}from\"../../contexts/AuthContext\";import Navbar from\"../../components/Navbar\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PlayerHistory(){const{user}=useAuth();const navigate=useNavigate();const[quizHistory,setQuizHistory]=useState([]);const[stats,setStats]=useState({totalQuizzes:0,averageScore:0,bestCategory:\"\",worstCategory:\"\"});const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");useEffect(()=>{const fetchHistory=async()=>{try{const token=localStorage.getItem(\"token\");const response=await axios.get(\"http://localhost:5000/api/player/history\",{headers:{Authorization:`Bearer ${token}`}});setQuizHistory(response.data.history);setStats(response.data.stats);}catch(error){setError(\"Failed to load history\");console.error(error);}finally{setLoading(false);}};fetchHistory();},[]);const handleBackToDashboard=()=>{navigate(\"/player/dashboard\");};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:\"Loading history...\"})})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6 max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-purple-600\",children:\"Quiz History\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBackToDashboard,className:\"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\",children:\"Back to Dashboard\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-2\",children:\"Statistics\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Total Quizzes:\"}),\" \",stats.totalQuizzes]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Average Score:\"}),\" \",stats.averageScore.toFixed(2),\"%\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Best Category:\"}),\" \",stats.bestCategory||\"N/A\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Worst Category:\"}),\" \",stats.worstCategory||\"N/A\"]})]})]})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Recent Quizzes\"}),quizHistory.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"You haven't taken any quizzes yet.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full bg-white\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100 text-gray-600 uppercase text-sm leading-normal\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-center\",children:\"Questions\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-center\",children:\"Score\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-center\",children:\"Percentage\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"text-gray-600 text-sm\",children:quizHistory.map(quiz=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-6 text-left whitespace-nowrap\",children:new Date(quiz.date).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-6 text-left\",children:quiz.category.name}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-6 text-center\",children:quiz.totalQuestions}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6 text-center\",children:[quiz.score,\" / \",quiz.totalQuestions]}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-6 text-center\",children:/*#__PURE__*/_jsxs(\"span\",{className:`py-1 px-3 rounded-full text-xs ${quiz.score/quiz.totalQuestions*100>=70?\"bg-green-200 text-green-700\":quiz.score/quiz.totalQuestions*100>=40?\"bg-yellow-200 text-yellow-700\":\"bg-red-200 text-red-700\"}`,children:[(quiz.score/quiz.totalQuestions*100).toFixed(0),\"%\"]})})]},quiz._id))})]})})]})})]});}export default PlayerHistory;","map":{"version":3,"names":["useState","useEffect","useNavigate","axios","useAuth","Navbar","jsx","_jsx","jsxs","_jsxs","PlayerHistory","user","navigate","quizHistory","setQuizHistory","stats","setStats","totalQuizzes","averageScore","bestCategory","worstCategory","loading","setLoading","error","setError","fetchHistory","token","localStorage","getItem","response","get","headers","Authorization","data","history","console","handleBackToDashboard","className","children","onClick","toFixed","length","map","quiz","Date","date","toLocaleDateString","category","name","totalQuestions","score","_id"],"sources":["D:/Lusana ko project/Lusana ko project/frontend/src/pages/player/History.js"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport axios from \"axios\"\nimport { useAuth } from \"../../contexts/AuthContext\"\nimport Navbar from \"../../components/Navbar\"\n\nfunction PlayerHistory() {\n  const { user } = useAuth()\n  const navigate = useNavigate()\n  const [quizHistory, setQuizHistory] = useState([])\n  const [stats, setStats] = useState({\n    totalQuizzes: 0,\n    averageScore: 0,\n    bestCategory: \"\",\n    worstCategory: \"\",\n  })\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(\"\")\n\n  useEffect(() => {\n    const fetchHistory = async () => {\n      try {\n        const token = localStorage.getItem(\"token\")\n        const response = await axios.get(\"http://localhost:5000/api/player/history\", {\n          headers: { Authorization: `Bearer ${token}` },\n        })\n\n        setQuizHistory(response.data.history)\n        setStats(response.data.stats)\n      } catch (error) {\n        setError(\"Failed to load history\")\n        console.error(error)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchHistory()\n  }, [])\n\n  const handleBackToDashboard = () => {\n    navigate(\"/player/dashboard\")\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-100\">\n        <Navbar />\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"text-center\">Loading history...</div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100\">\n      <Navbar />\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"bg-white rounded-lg shadow-md p-6 max-w-4xl mx-auto\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h1 className=\"text-2xl font-bold text-purple-600\">Quiz History</h1>\n            <button\n              onClick={handleBackToDashboard}\n              className=\"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\n            >\n              Back to Dashboard\n            </button>\n          </div>\n\n          {error && <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">{error}</div>}\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\n            <div className=\"bg-purple-50 p-4 rounded-lg\">\n              <h2 className=\"text-lg font-semibold mb-2\">Statistics</h2>\n              <div className=\"space-y-2\">\n                <p>\n                  <span className=\"font-medium\">Total Quizzes:</span> {stats.totalQuizzes}\n                </p>\n                <p>\n                  <span className=\"font-medium\">Average Score:</span> {stats.averageScore.toFixed(2)}%\n                </p>\n                <p>\n                  <span className=\"font-medium\">Best Category:</span> {stats.bestCategory || \"N/A\"}\n                </p>\n                <p>\n                  <span className=\"font-medium\">Worst Category:</span> {stats.worstCategory || \"N/A\"}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <h2 className=\"text-xl font-semibold mb-4\">Recent Quizzes</h2>\n\n          {quizHistory.length === 0 ? (\n            <div className=\"text-center py-8 text-gray-500\">You haven't taken any quizzes yet.</div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full bg-white\">\n                <thead>\n                  <tr className=\"bg-gray-100 text-gray-600 uppercase text-sm leading-normal\">\n                    <th className=\"py-3 px-6 text-left\">Date</th>\n                    <th className=\"py-3 px-6 text-left\">Category</th>\n                    <th className=\"py-3 px-6 text-center\">Questions</th>\n                    <th className=\"py-3 px-6 text-center\">Score</th>\n                    <th className=\"py-3 px-6 text-center\">Percentage</th>\n                  </tr>\n                </thead>\n                <tbody className=\"text-gray-600 text-sm\">\n                  {quizHistory.map((quiz) => (\n                    <tr key={quiz._id} className=\"border-b border-gray-200 hover:bg-gray-50\">\n                      <td className=\"py-3 px-6 text-left whitespace-nowrap\">\n                        {new Date(quiz.date).toLocaleDateString()}\n                      </td>\n                      <td className=\"py-3 px-6 text-left\">{quiz.category.name}</td>\n                      <td className=\"py-3 px-6 text-center\">{quiz.totalQuestions}</td>\n                      <td className=\"py-3 px-6 text-center\">\n                        {quiz.score} / {quiz.totalQuestions}\n                      </td>\n                      <td className=\"py-3 px-6 text-center\">\n                        <span\n                          className={`py-1 px-3 rounded-full text-xs ${\n                            (quiz.score / quiz.totalQuestions) * 100 >= 70\n                              ? \"bg-green-200 text-green-700\"\n                              : (quiz.score / quiz.totalQuestions) * 100 >= 40\n                                ? \"bg-yellow-200 text-yellow-700\"\n                                : \"bg-red-200 text-red-700\"\n                          }`}\n                        >\n                          {((quiz.score / quiz.totalQuestions) * 100).toFixed(0)}%\n                        </span>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default PlayerHistory\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}