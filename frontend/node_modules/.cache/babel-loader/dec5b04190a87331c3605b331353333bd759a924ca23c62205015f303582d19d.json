{"ast":null,"code":"\"use client\";import{useState,useEffect}from\"react\";import axios from\"axios\";import{useAuth}from\"../../contexts/AuthContext\";import Navbar from\"../../components/Navbar\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminLeaderboard(){const{user}=useAuth();const[leaderboard,setLeaderboard]=useState([]);const[categories,setCategories]=useState([]);const[selectedCategory,setSelectedCategory]=useState(\"all\");const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");useEffect(()=>{const fetchData=async()=>{try{const token=localStorage.getItem(\"token\");// Fetch categories\nconst categoriesResponse=await axios.get(\"http://localhost:5000/api/categories\",{headers:{Authorization:`Bearer ${token}`}});setCategories(categoriesResponse.data);// Fetch leaderboard\nconst leaderboardResponse=await axios.get(\"http://localhost:5000/api/admin/leaderboard\",{headers:{Authorization:`Bearer ${token}`}});setLeaderboard(leaderboardResponse.data);}catch(error){setError(\"Failed to load leaderboard data\");console.error(error);}finally{setLoading(false);}};fetchData();},[]);// Filter leaderboard based on category\nconst filteredLeaderboard=selectedCategory===\"all\"?leaderboard:leaderboard.filter(entry=>entry.categoryId===selectedCategory);if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:\"Loading leaderboard...\"})})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6 max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-center mb-6 text-purple-600\",children:\"Leaderboard\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"category-filter\",children:\"Filter by Category\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"category-filter\",className:\"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",value:selectedCategory,onChange:e=>setSelectedCategory(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Categories\"}),categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category._id,children:category.name},category._id))]})]}),filteredLeaderboard.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"No leaderboard data available for this category.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full bg-white\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100 text-gray-600 uppercase text-sm leading-normal\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-center\",children:\"Rank\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\"Player\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-center\",children:\"Quizzes Taken\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-center\",children:\"Avg. Score\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-center\",children:\"Best Score\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"text-gray-600 text-sm\",children:filteredLeaderboard.map((entry,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:`border-b border-gray-200 hover:bg-gray-50 ${index<3?\"bg-yellow-50\":\"\"}`,children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-6 text-center\",children:/*#__PURE__*/_jsx(\"div\",{className:`font-bold ${index===0?\"text-yellow-500\":index===1?\"text-gray-500\":index===2?\"text-amber-700\":\"\"}`,children:index+1})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-6 text-left\",children:entry.playerName}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-6 text-center\",children:entry.quizzesTaken}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-6 text-center\",children:/*#__PURE__*/_jsxs(\"span\",{className:`py-1 px-3 rounded-full text-xs ${entry.averageScore>=70?\"bg-green-200 text-green-700\":entry.averageScore>=40?\"bg-yellow-200 text-yellow-700\":\"bg-red-200 text-red-700\"}`,children:[entry.averageScore.toFixed(1),\"%\"]})}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6 text-center\",children:[entry.bestScore,\"%\"]})]},entry._id))})]})})]})})]});}export default AdminLeaderboard;","map":{"version":3,"names":["useState","useEffect","axios","useAuth","Navbar","jsx","_jsx","jsxs","_jsxs","AdminLeaderboard","user","leaderboard","setLeaderboard","categories","setCategories","selectedCategory","setSelectedCategory","loading","setLoading","error","setError","fetchData","token","localStorage","getItem","categoriesResponse","get","headers","Authorization","data","leaderboardResponse","console","filteredLeaderboard","filter","entry","categoryId","className","children","htmlFor","id","value","onChange","e","target","map","category","_id","name","length","index","playerName","quizzesTaken","averageScore","toFixed","bestScore"],"sources":["D:/Lusana ko project/Lusana ko project/frontend/src/pages/admin/Leaderboard.js"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport axios from \"axios\"\nimport { useAuth } from \"../../contexts/AuthContext\"\nimport Navbar from \"../../components/Navbar\"\n\nfunction AdminLeaderboard() {\n  const { user } = useAuth()\n  const [leaderboard, setLeaderboard] = useState([])\n  const [categories, setCategories] = useState([])\n  const [selectedCategory, setSelectedCategory] = useState(\"all\")\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(\"\")\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const token = localStorage.getItem(\"token\")\n\n        // Fetch categories\n        const categoriesResponse = await axios.get(\"http://localhost:5000/api/categories\", {\n          headers: { Authorization: `Bearer ${token}` },\n        })\n        setCategories(categoriesResponse.data)\n\n        // Fetch leaderboard\n        const leaderboardResponse = await axios.get(\"http://localhost:5000/api/admin/leaderboard\", {\n          headers: { Authorization: `Bearer ${token}` },\n        })\n        setLeaderboard(leaderboardResponse.data)\n      } catch (error) {\n        setError(\"Failed to load leaderboard data\")\n        console.error(error)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchData()\n  }, [])\n\n  // Filter leaderboard based on category\n  const filteredLeaderboard =\n    selectedCategory === \"all\" ? leaderboard : leaderboard.filter((entry) => entry.categoryId === selectedCategory)\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-100\">\n        <Navbar />\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"text-center\">Loading leaderboard...</div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100\">\n      <Navbar />\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"bg-white rounded-lg shadow-md p-6 max-w-4xl mx-auto\">\n          <h1 className=\"text-2xl font-bold text-center mb-6 text-purple-600\">Leaderboard</h1>\n\n          {error && <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">{error}</div>}\n\n          <div className=\"mb-6\">\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"category-filter\">\n              Filter by Category\n            </label>\n            <select\n              id=\"category-filter\"\n              className=\"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n              value={selectedCategory}\n              onChange={(e) => setSelectedCategory(e.target.value)}\n            >\n              <option value=\"all\">All Categories</option>\n              {categories.map((category) => (\n                <option key={category._id} value={category._id}>\n                  {category.name}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {filteredLeaderboard.length === 0 ? (\n            <div className=\"text-center py-8 text-gray-500\">No leaderboard data available for this category.</div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full bg-white\">\n                <thead>\n                  <tr className=\"bg-gray-100 text-gray-600 uppercase text-sm leading-normal\">\n                    <th className=\"py-3 px-6 text-center\">Rank</th>\n                    <th className=\"py-3 px-6 text-left\">Player</th>\n                    <th className=\"py-3 px-6 text-center\">Quizzes Taken</th>\n                    <th className=\"py-3 px-6 text-center\">Avg. Score</th>\n                    <th className=\"py-3 px-6 text-center\">Best Score</th>\n                  </tr>\n                </thead>\n                <tbody className=\"text-gray-600 text-sm\">\n                  {filteredLeaderboard.map((entry, index) => (\n                    <tr\n                      key={entry._id}\n                      className={`border-b border-gray-200 hover:bg-gray-50 ${index < 3 ? \"bg-yellow-50\" : \"\"}`}\n                    >\n                      <td className=\"py-3 px-6 text-center\">\n                        <div\n                          className={`font-bold ${\n                            index === 0\n                              ? \"text-yellow-500\"\n                              : index === 1\n                                ? \"text-gray-500\"\n                                : index === 2\n                                  ? \"text-amber-700\"\n                                  : \"\"\n                          }`}\n                        >\n                          {index + 1}\n                        </div>\n                      </td>\n                      <td className=\"py-3 px-6 text-left\">{entry.playerName}</td>\n                      <td className=\"py-3 px-6 text-center\">{entry.quizzesTaken}</td>\n                      <td className=\"py-3 px-6 text-center\">\n                        <span\n                          className={`py-1 px-3 rounded-full text-xs ${\n                            entry.averageScore >= 70\n                              ? \"bg-green-200 text-green-700\"\n                              : entry.averageScore >= 40\n                                ? \"bg-yellow-200 text-yellow-700\"\n                                : \"bg-red-200 text-red-700\"\n                          }`}\n                        >\n                          {entry.averageScore.toFixed(1)}%\n                        </span>\n                      </td>\n                      <td className=\"py-3 px-6 text-center\">{entry.bestScore}%</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default AdminLeaderboard\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}