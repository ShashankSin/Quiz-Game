{"ast":null,"code":"\"use client\";import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{useAuth}from\"../../contexts/AuthContext\";import Navbar from\"../../components/Navbar\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PlayerDashboard(){const{user,logout}=useAuth();const navigate=useNavigate();const[categories,setCategories]=useState([]);const[selectedCategory,setSelectedCategory]=useState(\"\");const[questionCount,setQuestionCount]=useState(5);const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");useEffect(()=>{const fetchCategories=async()=>{try{const token=localStorage.getItem(\"token\");const response=await axios.get(\"http://localhost:5000/api/categories\",{headers:{Authorization:`Bearer ${token}`}});setCategories(response.data);if(response.data.length>0){setSelectedCategory(response.data[0]._id);}}catch(error){setError(\"Failed to load categories\");console.error(error);}finally{setLoading(false);}};fetchCategories();},[]);const handleStartQuiz=()=>{navigate(\"/player/quiz\",{state:{categoryId:selectedCategory,questionCount}});};const handleViewHistory=()=>{navigate(\"/player/history\");};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:\"Loading...\"})})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6 max-w-2xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold text-center mb-6 text-purple-600\",children:[\"Welcome, \",user===null||user===void 0?void 0:user.name,\"!\"]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Start a New Quiz\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"category\",children:\"Select Category\"}),/*#__PURE__*/_jsx(\"select\",{id:\"category\",className:\"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",value:selectedCategory,onChange:e=>setSelectedCategory(e.target.value),children:categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category._id,children:category.name},category._id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"questionCount\",children:[\"Number of Questions: \",questionCount]}),/*#__PURE__*/_jsx(\"input\",{id:\"questionCount\",type:\"range\",min:\"1\",max:\"20\",className:\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\",value:questionCount,onChange:e=>setQuestionCount(Number.parseInt(e.target.value))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"10\"}),/*#__PURE__*/_jsx(\"span\",{children:\"15\"}),/*#__PURE__*/_jsx(\"span\",{children:\"20\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleStartQuiz,className:\"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full\",disabled:!selectedCategory,children:\"Start Quiz\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t pt-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleViewHistory,className:\"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full\",children:\"View My History\"})})]})})]});}export default PlayerDashboard;","map":{"version":3,"names":["useState","useEffect","useNavigate","axios","useAuth","Navbar","jsx","_jsx","jsxs","_jsxs","PlayerDashboard","user","logout","navigate","categories","setCategories","selectedCategory","setSelectedCategory","questionCount","setQuestionCount","loading","setLoading","error","setError","fetchCategories","token","localStorage","getItem","response","get","headers","Authorization","data","length","_id","console","handleStartQuiz","state","categoryId","handleViewHistory","className","children","name","htmlFor","id","value","onChange","e","target","map","category","type","min","max","Number","parseInt","onClick","disabled"],"sources":["D:/Lusana ko project/Lusana ko project/frontend/src/pages/player/Dashboard.js"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport axios from \"axios\"\nimport { useAuth } from \"../../contexts/AuthContext\"\nimport Navbar from \"../../components/Navbar\"\n\nfunction PlayerDashboard() {\n  const { user, logout } = useAuth()\n  const navigate = useNavigate()\n  const [categories, setCategories] = useState([])\n  const [selectedCategory, setSelectedCategory] = useState(\"\")\n  const [questionCount, setQuestionCount] = useState(5)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(\"\")\n\n  useEffect(() => {\n    const fetchCategories = async () => {\n      try {\n        const token = localStorage.getItem(\"token\")\n        const response = await axios.get(\"http://localhost:5000/api/categories\", {\n          headers: { Authorization: `Bearer ${token}` },\n        })\n        setCategories(response.data)\n        if (response.data.length > 0) {\n          setSelectedCategory(response.data[0]._id)\n        }\n      } catch (error) {\n        setError(\"Failed to load categories\")\n        console.error(error)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchCategories()\n  }, [])\n\n  const handleStartQuiz = () => {\n    navigate(\"/player/quiz\", {\n      state: {\n        categoryId: selectedCategory,\n        questionCount,\n      },\n    })\n  }\n\n  const handleViewHistory = () => {\n    navigate(\"/player/history\")\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-100\">\n        <Navbar />\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"text-center\">Loading...</div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100\">\n      <Navbar />\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"bg-white rounded-lg shadow-md p-6 max-w-2xl mx-auto\">\n          <h1 className=\"text-3xl font-bold text-center mb-6 text-purple-600\">Welcome, {user?.name}!</h1>\n\n          {error && <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">{error}</div>}\n\n          <div className=\"mb-6\">\n            <h2 className=\"text-xl font-semibold mb-4\">Start a New Quiz</h2>\n\n            <div className=\"mb-4\">\n              <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"category\">\n                Select Category\n              </label>\n              <select\n                id=\"category\"\n                className=\"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                value={selectedCategory}\n                onChange={(e) => setSelectedCategory(e.target.value)}\n              >\n                {categories.map((category) => (\n                  <option key={category._id} value={category._id}>\n                    {category.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div className=\"mb-4\">\n              <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"questionCount\">\n                Number of Questions: {questionCount}\n              </label>\n              <input\n                id=\"questionCount\"\n                type=\"range\"\n                min=\"1\"\n                max=\"20\"\n                className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n                value={questionCount}\n                onChange={(e) => setQuestionCount(Number.parseInt(e.target.value))}\n              />\n              <div className=\"flex justify-between text-xs text-gray-600\">\n                <span>1</span>\n                <span>5</span>\n                <span>10</span>\n                <span>15</span>\n                <span>20</span>\n              </div>\n            </div>\n\n            <button\n              onClick={handleStartQuiz}\n              className=\"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full\"\n              disabled={!selectedCategory}\n            >\n              Start Quiz\n            </button>\n          </div>\n\n          <div className=\"border-t pt-6\">\n            <button\n              onClick={handleViewHistory}\n              className=\"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full\"\n            >\n              View My History\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default PlayerDashboard\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}